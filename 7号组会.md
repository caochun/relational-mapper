# 7号组会

+ 在https://www.w3schools.com/sql/default.asp这个上面的sql都选择实现，其余视为方言，需要后期注入。

+ 增添了rename支持的对象 done

  ```sql
  select 
  '' as JRXKZH,	--金融许可证号
  ```

+ 暂时移除了对表的重命名的支持 done

+ 增添了对oracle部分方言的支持，目前仅支持 func(params)->single attribute  ƒ, 后续在思考需不需要提供表来进行处理，比如 ƒ(@1)， 然后查表将@1替换成nvl这样。

+ 但是case when 语句绝不应该作为用户自己插入的语句。其中下面这种syntax可以覆盖两种syntax的case when，我们这里选择只实现这种。 done

  ```sql
  CASE
      WHEN condition1 THEN result1
      WHEN condition2 THEN result2
      WHEN conditionN THEN resultN
      ELSE result
  END;
  ψ(cond1, res1; cond2, res2; res)
  ψ(a=b, a; a=c, '1'; b)
  ```

+ case 的支持，他作为一个返回attribute的语句块，必然会引起之大量直接翻译attribute的重构。 done

+ 实现group by γ done

  + 但是细节需要注意，对于任何一个exp，都是需要先group再select。

+ 之后的部分插入sql片段打算用ƒ开头 done
  + 这里需要脱离oracle方言的限制，使用ƒ占位，但是后面需要对他们进行替换。打算拿jackson来做。

+ 实现union done
+ 修正rename使其作为一个特殊的projection done
+ 嵌套case 需要添加一个test done 
+ 对于condition的支持需要加强。比如like，但是像in 和 between 可以视作 基本比较的shorthand。
  + like 语法遇到了一些小问题，因为blankspace全部被跳过，a like b会被识别成 alike，没有想到更好的通用解决方法，，所以使用了希腊字母λ。
  + 现在正在进行重构，因为关系代数的relop不够完备，需要将一些关键字保留下来，不能让其被识别为attribute，这个打算作为下一个feature，现在暂时还是先用希腊字母。to do正则修改的网址https://stackoverflow.com/questions/2078915/a-regular-expression-to-exclude-a-word-string